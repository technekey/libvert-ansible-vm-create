```
ansible-playbook  automated_vm_creation.yml   -e vm_name=sample-vm -e vcpus=2 -e memory_mb=2048  -e os_variant=ubuntu22.04 -e disk_size=100G -e image_source=https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img    -e cloud_init_file=my-cloud-init.yml
[WARNING]: No inventory was parsed, only implicit localhost is available
[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

PLAY [Deploy VM using Cloud-init] ***************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **************************************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:13 -0500 (0:00:00.026)       0:00:00.026 ********** 
ok: [localhost]

TASK [Perform Input parameter validation] *******************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:14 -0500 (0:00:01.401)       0:00:01.427 ********** 

TASK [input_validation : Ensure the dependencies are present on the host] ***********************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:14 -0500 (0:00:00.044)       0:00:01.472 ********** 
ok: [localhost]

TASK [input_validation : Check for cloud_init_file input variable] ******************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:15 -0500 (0:00:00.797)       0:00:02.270 ********** 
skipping: [localhost]

TASK [input_validation : Ensure required parameters are supplied via extra-vars] ****************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:15 -0500 (0:00:00.018)       0:00:02.289 ********** 
ok: [localhost] => {
    "changed": false,
    "msg": "All required extra args are defined"
}

TASK [input_validation : List the Existing KVM present on the host machine] *********************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:15 -0500 (0:00:00.056)       0:00:02.346 ********** 
ok: [localhost]

TASK [input_validation : Check if the user requested VM is already present in the Host] *********************************************************************************************************************************************
Tuesday 05 July 2022  16:08:15 -0500 (0:00:00.245)       0:00:02.591 ********** 
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [input_validation : Loading the path of all required binaries in the ansible host] *********************************************************************************************************************************************
Tuesday 05 July 2022  16:08:15 -0500 (0:00:00.017)       0:00:02.609 ********** 
changed: [localhost] => (item=virt-install)
changed: [localhost] => (item=virsh)
changed: [localhost] => (item=virt-ls)
changed: [localhost] => (item=virt-cat)
changed: [localhost] => (item=qemu-img)
changed: [localhost] => (item=cloud-localds)

TASK [input_validation : Validating the network mode] *******************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:16 -0500 (0:00:00.888)       0:00:03.497 ********** 
ok: [localhost] => {
    "changed": false,
    "msg": "Network mode validated."
}

TASK [input_validation : Collect the stats of provided cloud init file] *************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:16 -0500 (0:00:00.026)       0:00:03.524 ********** 
ok: [localhost]

TASK [input_validation : Ensure the provided cloud-init file exist] *****************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.262)       0:00:03.787 ********** 
ok: [localhost] => {
    "changed": false,
    "msg": "The provided cloud init file exists(my-cloud-init.yml)"
}

TASK [Calling VM-Creator role] ******************************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.032)       0:00:03.819 ********** 

TASK [vm_creator : Create a temp cloud-init file if user did not provide cloud-init file] *******************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.035)       0:00:03.854 ********** 
skipping: [localhost]

TASK [vm_creator : Create a template to add the VM-NAME(sample-vm) to the temp cloud-init file] *************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.020)       0:00:03.875 ********** 
skipping: [localhost]

TASK [vm_creator : Pointing to active cloud-init file] ******************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.018)       0:00:03.894 ********** 
ok: [localhost]

TASK [vm_creator : Create the required directory] ***********************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.018)       0:00:03.912 ********** 
ok: [localhost] => (item=/var/lib/vm_images)
ok: [localhost] => (item=/var/lib/libvert_vm)
ok: [localhost] => (item=/var/lib/libvert_vm/sample-vm)

TASK [vm_creator : Determine if this is a local(file already present) or network download] ******************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.487)       0:00:04.399 ********** 
ok: [localhost]

TASK [vm_creator : Determine the valid list of OS-Variants] *************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:17 -0500 (0:00:00.134)       0:00:04.534 ********** 
changed: [localhost]

TASK [vm_creator : assert the os-variant] *******************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:18 -0500 (0:00:00.792)       0:00:05.327 ********** 
ok: [localhost] => {
    "changed": false,
    "msg": "OS Variant assertion passed"
}

TASK [vm_creator : Download the Image] **********************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:08:18 -0500 (0:00:00.019)       0:00:05.346 ********** 
ok: [localhost]

TASK [vm_creator : Store the downloaded image file name] ****************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:07 -0500 (0:00:48.492)       0:00:53.838 ********** 
ok: [localhost]

TASK [vm_creator : Get the format of the downloaded image] **************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:07 -0500 (0:00:00.028)       0:00:53.867 ********** 
changed: [localhost]

TASK [vm_creator : Get the format of the downloaded image] **************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:07 -0500 (0:00:00.158)       0:00:54.025 ********** 
ok: [localhost]

TASK [vm_creator : Convert the image to qcow] ***************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:07 -0500 (0:00:00.032)       0:00:54.058 ********** 
changed: [localhost]

TASK [vm_creator : Resize the disk] *************************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:08 -0500 (0:00:01.594)       0:00:55.652 ********** 
changed: [localhost]

TASK [vm_creator : Create a seed image located at my-cloud-init.yml] ****************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:09 -0500 (0:00:00.667)       0:00:56.319 ********** 
changed: [localhost]

TASK [vm_creator : Cleanup the Default cloud-init file] *****************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:09 -0500 (0:00:00.161)       0:00:56.480 ********** 
skipping: [localhost]

TASK [vm_creator : Do the install for Default network] ******************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:09 -0500 (0:00:00.019)       0:00:56.499 ********** 
changed: [localhost]

TASK [vm_creator : Do the install for bridged network] ******************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:02.385)       0:00:58.885 ********** 
skipping: [localhost]

TASK [Check for cloud-init completion] **********************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.025)       0:00:58.910 ********** 

TASK [cloud_init_check : Check the VM status] ***************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.037)       0:00:58.948 ********** 
skipping: [localhost]

TASK [cloud_init_check : Wait for cloud-init result file to get created] ************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.027)       0:00:58.975 ********** 
skipping: [localhost]

TASK [cloud_init_check : Waiting for Cloud init to complete] ************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.029)       0:00:59.005 ********** 
skipping: [localhost]

TASK [cloud_init_check : Validate the cloud-init execution results] *****************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.031)       0:00:59.036 ********** 
skipping: [localhost]

TASK [cloud_init_check : Capture the Current Status of the VM] **********************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.031)       0:00:59.068 ********** 
ok: [localhost]

TASK [cloud_init_check : Grab the IP address of the VM Created] *********************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:12 -0500 (0:00:00.196)       0:00:59.264 ********** 
FAILED - RETRYING: [localhost]: Grab the IP address of the VM Created (90 retries left).
FAILED - RETRYING: [localhost]: Grab the IP address of the VM Created (89 retries left).
changed: [localhost]

TASK [cloud_init_check : Ensure directory to write ip address of the VM is present] *************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:23 -0500 (0:00:10.589)       0:01:09.853 ********** 
changed: [localhost]

TASK [cloud_init_check : Show VM info] **********************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:23 -0500 (0:00:00.179)       0:01:10.033 ********** 
ok: [localhost] => {
    "msg": [
        {
            "changed": false,
            "failed": false,
                "sample-vm": {
                "autostart": 0,
                "cpuTime": "780000000",
                "maxMem": "2097152",
                "memory": "2097152",
                "nrVirtCpu": 2,
                "state": "running"
            }
        },
        "192.168.122.198"
    ]
}

TASK [cloud_init_check : Write the VM Info to a file /home/ps/ansible_libvert_kvm/vm_creation/ip] ***********************************************************************************************************************************
Tuesday 05 July 2022  16:09:23 -0500 (0:00:00.031)       0:01:10.065 ********** 
changed: [localhost]

TASK [Set autostart disable for the VM] *********************************************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:23 -0500 (0:00:00.411)       0:01:10.476 ********** 

TASK [disable_autostart_vm : Set autostart disable for the VM] **********************************************************************************************************************************************************************
Tuesday 05 July 2022  16:09:23 -0500 (0:00:00.049)       0:01:10.526 ********** 
ok: [localhost]

PLAY RECAP **************************************************************************************************************************************************************************************************************************
localhost                  : ok=28   changed=10   unreachable=0    failed=0    skipped=9    rescued=0    ignored=0   

Tuesday 05 July 2022  16:09:23 -0500 (0:00:00.217)       0:01:10.743 ********** 
=============================================================================== 
Gathering Facts -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.40s
Perform Input parameter validation ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.04s
input_validation : Ensure the dependencies are present on the host ----------------------------------------------------------------------------------------------------------------------------------------------------------- 0.80s
input_validation : Check for cloud_init_file input variable ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.02s
input_validation : Ensure required parameters are supplied via extra-vars ---------------------------------------------------------------------------------------------------------------------------------------------------- 0.06s
input_validation : List the Existing KVM present on the host machine --------------------------------------------------------------------------------------------------------------------------------------------------------- 0.25s
input_validation : Check if the user requested VM is already present in the Host --------------------------------------------------------------------------------------------------------------------------------------------- 0.02s
input_validation : Loading the path of all required binaries in the ansible host --------------------------------------------------------------------------------------------------------------------------------------------- 0.89s
input_validation : Validating the network mode ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
input_validation : Collect the stats of provided cloud init file ------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.26s
input_validation : Ensure the provided cloud-init file exist ----------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
Calling VM-Creator role ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.04s
vm_creator : Create a temp cloud-init file if user did not provide cloud-init file ------------------------------------------------------------------------------------------------------------------------------------------- 0.02s
vm_creator : Create a template to add the VM-NAME(sample-vm) to the temp cloud-init file ------------------------------------------------------------------------------------------------------------------------------------- 0.02s
vm_creator : Pointing to active cloud-init file ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.02s
vm_creator : Create the required directory ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.49s
vm_creator : Determine if this is a local(file already present) or network download ------------------------------------------------------------------------------------------------------------------------------------------ 0.13s
vm_creator : Determine the valid list of OS-Variants ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.79s
vm_creator : assert the os-variant ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.02s
vm_creator : Download the Image --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 48.49s
vm_creator : Store the downloaded image file name ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
vm_creator : Get the format of the downloaded image -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.16s
vm_creator : Get the format of the downloaded image -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
vm_creator : Convert the image to qcow --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.59s
vm_creator : Resize the disk ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.67s
vm_creator : Create a seed image located at my-cloud-init.yml ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.16s
vm_creator : Cleanup the Default cloud-init file ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.02s
vm_creator : Do the install for Default network ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 2.39s
vm_creator : Do the install for bridged network ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.03s
Check for cloud-init completion ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.04s
cloud_init_check : Check the VM status --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
cloud_init_check : Wait for cloud-init result file to get created ------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.03s
cloud_init_check : Waiting for Cloud init to complete ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.03s
cloud_init_check : Validate the cloud-init execution results ----------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
cloud_init_check : Capture the Current Status of the VM ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.20s
cloud_init_check : Grab the IP address of the VM Created -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 10.59s
cloud_init_check : Ensure directory to write ip address of the VM is present ------------------------------------------------------------------------------------------------------------------------------------------------- 0.18s
cloud_init_check : Show VM info ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
cloud_init_check : Write the VM Info to a file /home/ps/ansible_libvert_kvm/vm_creation/ip ----------------------------------------------------------------------------------------------------------------------------------- 0.41s
Set autostart disable for the VM --
```
